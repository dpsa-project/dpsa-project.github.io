<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="hpke"><meta name="keywords" content="rust, rustlang, rust-lang, hpke"><title>hpke - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-52c5db6f6f352e54.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../static.files/light-4743e13df3dfe8c4.css"><link rel="stylesheet" disabled href="../static.files/dark-0e1b889528bd466b.css"><link rel="stylesheet" disabled href="../static.files/ayu-65289d5d067c7c66.css"><script id="default-settings" ></script><script src="../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-3367e395607fafc1.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../hpke/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../hpke/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Crate hpke</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.10.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">hpke</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/hpke/lib.rs.html#1-207">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="hpke"><a href="#hpke">hpke</a></h2>
<p><strong>WARNING:</strong> This code has not been audited. Use at your own discretion.</p>
<p>This is a pure Rust implementation of the
<a href="https://datatracker.ietf.org/doc/rfc9180/">HPKE</a> hybrid encryption scheme (RFC 9180). The
purpose of hybrid encryption is to use allow someone to send secure messages to an entity whose
public key they know. Here’s an example of Alice and Bob, where Alice knows Bob’s public key:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// These types define the ciphersuite Alice and Bob will be using
</span><span class="kw">type </span>Kem = X25519HkdfSha256;
<span class="kw">type </span>Aead = ChaCha20Poly1305;
<span class="kw">type </span>Kdf = HkdfSha384;

<span class="kw">let </span><span class="kw-2">mut </span>csprng = StdRng::from_entropy();

<span class="comment">// This is a description string for the session. Both Alice and Bob need to know this value.
// It&#39;s not secret.
</span><span class="kw">let </span>info_str = <span class="string">b&quot;Alice and Bob&#39;s weekly chat&quot;</span>;

<span class="comment">// Alice initiates a session with Bob. OpModeS::Base means that Alice is not authenticating
// herself at all. If she had a public key herself, or a pre-shared secret that Bob also
// knew, she&#39;d be able to authenticate herself. See the OpModeS and OpModeR types for more
// detail.
</span><span class="kw">let </span>(encapsulated_key, <span class="kw-2">mut </span>encryption_context) =
    hpke::setup_sender::&lt;Aead, Kdf, Kem, <span class="kw">_</span>&gt;(<span class="kw-2">&amp;</span>OpModeS::Base, <span class="kw-2">&amp;</span>bob_pk, info_str, <span class="kw-2">&amp;mut </span>csprng)
        .expect(<span class="string">&quot;invalid server pubkey!&quot;</span>);

<span class="comment">// Alice encrypts a message to Bob. `aad` is authenticated associated data that is not
// encrypted.
</span><span class="kw">let </span>msg = <span class="string">b&quot;fronthand or backhand?&quot;</span>;
<span class="kw">let </span>aad = <span class="string">b&quot;a gentleman&#39;s game&quot;</span>;
<span class="comment">// To seal without allocating:
//     let auth_tag = encryption_context.seal_in_place_detached(&amp;mut msg, aad)?;
// To seal with allocating:
</span><span class="kw">let </span>ciphertext = encryption_context.seal(msg, aad).expect(<span class="string">&quot;encryption failed!&quot;</span>);

<span class="comment">// ~~~
// Alice sends the encapsulated key, message ciphertext, AAD, and auth tag to Bob over the
// internet. Alice doesn&#39;t care if it&#39;s an insecure connection, because only Bob can read
// her ciphertext.
// ~~~

// Somewhere far away, Bob receives the data and makes a decryption session
</span><span class="kw">let </span><span class="kw-2">mut </span>decryption_context =
    hpke::setup_receiver::&lt;Aead, Kdf, Kem&gt;(
        <span class="kw-2">&amp;</span>OpModeR::Base,
        <span class="kw-2">&amp;</span>bob_sk,
        <span class="kw-2">&amp;</span>encapsulated_key,
        info_str,
    ).expect(<span class="string">&quot;failed to set up receiver!&quot;</span>);
<span class="comment">// To open without allocating:
//     decryption_context.open_in_place_detached(&amp;mut ciphertext, aad, &amp;auth_tag)
// To open with allocating:
</span><span class="kw">let </span>plaintext = decryption_context.open(<span class="kw-2">&amp;</span>ciphertext, aad).expect(<span class="string">&quot;invalid ciphertext!&quot;</span>);

<span class="macro">assert_eq!</span>(<span class="kw-2">&amp;</span>plaintext, <span class="string">b&quot;fronthand or backhand?&quot;</span>);</code></pre></div>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2><div class="item-table"><div class="item-row"><div class="item-left import-item" id="reexport.generic_array"><code>pub use <a class="mod" href="../generic_array/index.html" title="mod generic_array">generic_array</a>;</code></div></div><div class="item-row"><div class="item-left import-item" id="reexport.rand_core"><code>pub use <a class="mod" href="../rand_core/index.html" title="mod rand_core">rand_core</a>;</code></div></div></div><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="aead/index.html" title="hpke::aead mod">aead</a></div><div class="item-right docblock-short">Traits and structs for authenticated encryption schemes</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="kdf/index.html" title="hpke::kdf mod">kdf</a></div><div class="item-right docblock-short">Traits and structs for key derivation functions</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="kem/index.html" title="hpke::kem mod">kem</a></div><div class="item-right docblock-short">Traits and structs for key encapsulation mechanisms</div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.PskBundle.html" title="hpke::PskBundle struct">PskBundle</a></div><div class="item-right docblock-short">Contains preshared key bytes and an identifier. This is intended to go inside an <code>OpModeR</code> or
<code>OpModeS</code> struct.</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.HpkeError.html" title="hpke::HpkeError enum">HpkeError</a></div><div class="item-right docblock-short">Describes things that can go wrong in the HPKE protocol</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.OpModeR.html" title="hpke::OpModeR enum">OpModeR</a></div><div class="item-right docblock-short">The operation mode of the HPKE session (receiver’s view). This is how the sender authenticates
their identity to the receiver. This authentication information can include a preshared key,
the identity key of the sender, both, or neither. <code>Base</code> is the only mode that does not provide
any kind of sender identity authentication.</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.OpModeS.html" title="hpke::OpModeS enum">OpModeS</a></div><div class="item-right docblock-short">The operation mode of the HPKE session (sender’s view). This is how the sender authenticates
their identity to the receiver. This authentication information can include a preshared key,
the identity key of the sender, both, or neither. <code>Base</code> is the only mode that does not provide
any kind of sender identity authentication.</div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.Deserializable.html" title="hpke::Deserializable trait">Deserializable</a></div><div class="item-right docblock-short">Implemented by types that can be deserialized from byte representation</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.Kem.html" title="hpke::Kem trait">Kem</a></div><div class="item-right docblock-short">Represents authenticated encryption functionality</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.Serializable.html" title="hpke::Serializable trait">Serializable</a></div><div class="item-right docblock-short">Implemented by types that have a fixed-length byte representation</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.setup_receiver.html" title="hpke::setup_receiver fn">setup_receiver</a></div><div class="item-right docblock-short">Initiates a decryption context given a private key <code>sk_recip</code> and an encapsulated key which
was encapsulated to <code>sk_recip</code>’s corresponding public key</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.setup_sender.html" title="hpke::setup_sender fn">setup_sender</a></div><div class="item-right docblock-short">Initiates an encryption context to the given recipient public key</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.single_shot_open.html" title="hpke::single_shot_open fn">single_shot_open</a></div><div class="item-right docblock-short">Does a <code>setup_receiver</code> and <code>AeadCtxR::open</code> in one shot. That is, it does a key decapsulation
for the specified recipient and decrypts the provided ciphertext. See <code>setup::setup_reciever</code>
and <code>AeadCtxR::open</code> for more detail.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.single_shot_open_in_place_detached.html" title="hpke::single_shot_open_in_place_detached fn">single_shot_open_in_place_detached</a></div><div class="item-right docblock-short">Does a <code>setup_receiver</code> and <code>AeadCtxR::open_in_place_detached</code> in one shot. That is, it does a
key decapsulation for the specified recipient and decrypts the provided ciphertext in place.
See <code>setup::setup_reciever</code> and <code>AeadCtxR::open_in_place_detached</code> for more detail.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.single_shot_seal.html" title="hpke::single_shot_seal fn">single_shot_seal</a></div><div class="item-right docblock-short">Does a <code>setup_sender</code> and <code>AeadCtxS::seal</code> in one shot. That is, it does a key encapsulation to
the specified recipient and encrypts the provided plaintext. See <code>setup::setup_sender</code> and
<code>AeadCtxS::seal</code> for more detail.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.single_shot_seal_in_place_detached.html" title="hpke::single_shot_seal_in_place_detached fn">single_shot_seal_in_place_detached</a></div><div class="item-right docblock-short">Does a <code>setup_sender</code> and <code>AeadCtxS::seal_in_place_detached</code> in one shot. That is, it does a
key encapsulation to the specified recipient and encrypts the provided plaintext in place. See
<code>setup::setup_sender</code> and <code>AeadCtxS::seal_in_place_detached</code> for more detail.</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="hpke" data-themes="" data-resource-suffix="" data-rustdoc-version="1.68.0-nightly (4c83bd03a 2023-01-19)" data-search-js="search-98d53477a794af0b.js" data-settings-js="settings-c3c521c753752a1a.js" data-settings-css="settings-ab1d4ae2ec52020e.css" ></div></body></html>